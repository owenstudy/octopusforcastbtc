# query the closed transaction data
 select trans_id,coin,sell_amount-buy_amount as profit_amount, buy_status,buy_price,buy_units,buy_amount,sell_status,sell_price,sell_amount
  from t_coin_trans_log where sell_status='closed' order by trans_id ;
# get the total profit buy_amount
 select sum(sell_amount-buy_amount) total_profit_amount, count(*) from t_coin_trans_log;
# query the outstanding transactiond data
 select count(*) from t_coin_trans ;
# check the detail of outstaning transactions
 select trans_id, coin, buy_date, buy_status, buy_price, buy_amount, sell_status, sell_price, sell_units from t_coin_trans;
# 查看交易中订单和完成的订单数量
 select * from v_trans_summary;

create view v_trans_summary as
select '交易中' trans_status, count(*) from t_coin_trans
union
select '交易完成' trans_status, count(*) from t_coin_trans_log where sell_status='closed'
union
select '买入取消' trans_status, count(*) from t_coin_trans_log where buy_status='cancelled'
union
select '卖出取消' trans_status, count(*) from t_coin_trans_log where sell_status='cancelled'
;